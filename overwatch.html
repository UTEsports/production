<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<link rel="stylesheet" href="styles.css">

<title>Overwatch Controller</title>
<style>
  /* Style for collapsible section header */
  .collapsible, .gen-info {
    background-color: #3498db;
    color: #f1f1f1;
    cursor: pointer;
    padding: 10px;
    width: calc(100% - 40px); /* Adjusted width to accommodate arrow */
    border: none;
    text-align: left;
    outline: none;
    position: relative; /* Added position relative for arrow positioning */
    margin-top: 10px;
  }

  /* Style for active collapsible section */
  .active, .collapsible:hover {
    background-color: #3e8e41;
  }

  /* Style for content inside collapsible section */
  .content {
    padding: 0 18px;
    display: none;
    overflow: hidden;
    background-color: #f1f1f1;
  }

  /* Style for dropdown arrow icon */
  .dropdown-icon {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
  }

  .input-container {
    margin-bottom: 18px;
  }

  /* Adjust form width and margin */
  form {
    width: 20%; /* Adjust the width as needed */
    margin: 0 auto; /* Center align the form */
  }

  /* Style for back button */
  .back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    background-color: #3498db;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    text-decoration: none;
    font-family: 'Rajdhani', sans-serif;
  }
</style>
</head>
<body style="background-color: #f1f1f1;">

<a href="index.html" class="back-button">Back</a> <!-- Back button -->

<h1>Overwatch Controller</h1>

<button class="gen-info rajdhani-medium" style="font-size: xx-large;">General Information (Casters, Team Info, Break Screen)</button>

<button class="collapsible rajdhani-medium" style="font-size: xx-large;">Match Information
  <span class="dropdown-icon">&#9660;</span> <!-- Downward arrow icon -->
</button>
<div class="content">
  <button type="button" onclick="resetForm(this)" class="reset" style="font-size: xx-large;">Reset</button>
  <button type="button" onclick="swap(this)" class="swap" style="font-size: xx-large;">Swap Sides</button>
  <div class="content" style="display: flex; justify-content: center; align-items: center;">
    <form name="team1info" method="post" onsubmit="saveData('team1info', event)" id="t1">
      <h3>Team 1</h3>
      <div class="team-info">
        <label for="t1_name">Team 1 Name:</label>
        <input type="text" id="t1_name" name="name">
      </div><br>
      <div class="team-info">
        <label for="t2_name">Team 1 Logo (image link):</label>
        <input type="text" id="t2_name" name="logo">
      </div><br>
      <input type="submit" value="Submit">
    </form>
    <form name="team2info" method="post" onsubmit="saveData('team2info', event)" id="t2">
      <h3>Team 2</h3>
      <div class="team-info">
        <label for="t1_name">Team 2 Name:</label>
        <input type="text" id="t1_name" name="name">
      </div><br>
      <div class="team-info">
        <label for="t2_name">Team 2 Logo (image link):</label>
        <input type="text" id="t2_name" name="logo">
      </div><br>
      <input type="submit" value="Submit">
    </form>
  </div>
</div>

<button class="collapsible rajdhani-medium" style="font-size: xx-large;">Roster Information
  <span class="dropdown-icon">&#9660;</span> <!-- Downward arrow icon -->
</button>
<div class="content">
  <button type="button" onclick="resetForm(this)" class="reset" style="font-size: xx-large;">Reset</button>
  <div class="content" style="display: flex; justify-content: center; align-items: center;">
    <form name="team1" method="post" onsubmit="saveData('team1', event)" id="t1roster">
      <h3>Team 1</h3>
      <div class="player-info">
        <label for="player1_name_1">Player 1 Name:</label>
        <input type="text" id="player1_name_ow" name="player1_name_ow">
        <select class="js-example-basic-single" name="player1_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player2_name_1">Player 2 Name:</label>
        <input type="text" id="player2_name_ow" name="player2_name_ow">
        <select class="js-example-basic-single" name="player2_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player3_name_1">Player 3 Name:</label>
        <input type="text" id="player3_name_ow" name="player3_name_ow">
        <select class="js-example-basic-single" name="player3_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player4_name_1">Player 4 Name:</label>
        <input type="text" id="player4_name_ow" name="player4_name_ow">
        <select class="js-example-basic-single" name="player4_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player5_name_1">Player 5 Name:</label>
        <input type="text" id="player5_name_ow" name="player5_name_ow">
        <select class="js-example-basic-single" name="player5_hero"></select>
      </div><br>
      <input type="submit" value="Submit">
    </form>
    
    
    <form name="team2" method="post" onsubmit="saveData('team2', event)" id="t2roster">
      <h3>Team 2</h3>
      <div class="player-info">
        <label for="player6_name_1">Player 1 Name:</label>
        <input type="text" id="player6_name_ow" name="player6_name_ow">
        <select class="js-example-basic-single" name="player6_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player7_name_1">Player 2 Name:</label>
        <input type="text" id="player7_name_ow" name="player7_name_ow">
        <select class="js-example-basic-single" name="player7_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player8_name_1">Player 3 Name:</label>
        <input type="text" id="player8_name_ow" name="player8_name_ow">
        <select class="js-example-basic-single" name="player8_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player9_name_1">Player 4 Name:</label>
        <input type="text" id="player9_name_ow" name="player9_name_ow">
        <select class="js-example-basic-single" name="player9_hero"></select>
      </div><br>
      <div class="player-info">
        <label for="player10_name_1">Player 5 Name:</label>
        <input type="text" id="player10_name_ow" name="player10_name_ow">
        <select class="js-example-basic-single" name="player10_hero"></select>
      </div><br>
      <input type="submit" value="Submit" id="submit">
    </form>
  </div>
</div>

<button class="collapsible rajdhani-medium" style="font-size: xx-large;">Map Information
  <span class="dropdown-icon">&#9660;</span> <!-- Downward arrow icon -->
</button>
<div class="content">
  <button type="button" onclick="resetForm(this)" class="reset" style="font-size: xx-large;">Reset</button><br>
  <h2>Select Format:</h2>
  <div class="content" style="display: flex; justify-content: center; align-items: center;">
    <label for="radio">BO3</label>
    <input type="radio" name="formType" value="BO3" checked>
    <label for="radio">BO5</label>
    <input type="radio" name="formType" value="BO5">
  </div>

  <div id="bo3">
    <h2>Bo3</h2>
    <div style="display: flex; justify-content: center; align-items: center;">
      <form name="map1_bo3_form" method="post" onsubmit="saveData('map1_bo3_form', event)" id="bo3m1">
        <h2>Map 1</h2>
        <label>State</label>
        <select id="map1bo3-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map1_bo3"></select>
        <label for="team1_map1_score">Team 1 Score:</label>
        <input type="text" id="team1_map1_score" name="team1_map1_score">
        <label for="team2_map1_score">Team 2 Score:</label>
        <input type="text" id="team2_map1_score" name="team2_map1_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map2_bo3_form" method="post" onsubmit="saveData('map2_bo3_form', event)" id="bo3m2">
        <h2>Map 2</h2>
        <label>State</label>
        <select id="map2bo3-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map2_bo3"></select>
        <label for="team1_map2_score">Team 1 Score:</label>
        <input type="text" id="team1_map2_score" name="team1_map2_score">
        <label for="team2_map1_score">Team 2 Score:</label>
        <input type="text" id="team2_map2_score" name="team2_map2_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map3_bo3_form" method="post" onsubmit="saveData('map3_bo3_form', event)" id="bo3m3">
        <h2>Map 3</h2>
        <label>State</label>
        <select id="map3bo3-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map3_bo3"></select>
        <label for="team1_map3_score">Team 1 Score:</label>
        <input type="text" id="team1_map3_score" name="team1_map3_score">
        <label for="team2_map1_score">Team 2 Score:</label>
        <input type="text" id="team2_map3_score" name="team2_map3_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
    </div>
  </div>
  
  <div id="bo5">
    <h2>BO5</h2>
    <div style="display: flex; justify-content: center; align-items: center;">
      <form name="map1_bo5_form" method="post" onsubmit="saveData('map1_bo5_form', event)" id="bo5m1">
        <h2>Map 1</h2>
        <label>State</label>
        <select id="map1bo5-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map1_bo5"></select>
        <label for="team1_map1_score">Team 1 Score:</label>
        <input type="text" id="team1_map1_score" name="team1_map1_score">
        <label for="team2_map1_score">Team 2 Score:</label>
        <input type="text" id="team2_map1_score" name="team2_map1_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map2_bo5_form" method="post" onsubmit="saveData('map2_bo5_form', event)" id="bo5m2">
        <h2>Map 2</h2>
        <label>State</label>
        <select id="map2bo5-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map2_bo5"></select>
        <label for="team1_map2_score">Team 1 Score:</label>
        <input type="text" id="team1_map2_score" name="team1_map2_score">
        <label for="team2_map2_score">Team 2 Score:</label>
        <input type="text" id="team2_map2_score" name="team2_map2_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map3_bo5_form" method="post" onsubmit="saveData('map3_bo5_form', event)" id="bo5m3">
        <h2>Map 3</h2>
        <label>State</label>
        <select id="map3bo5-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map3_bo5"></select>
        <label for="team1_map3_score">Team 1 Score:</label>
        <input type="text" id="team1_map3_score" name="team1_map3_score">
        <label for="team2_map3_score">Team 2 Score:</label>
        <input type="text" id="team2_map3_score" name="team2_map3_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map4_bo5_form" method="post" onsubmit="saveData('map4_bo5_form', event)" id="bo5m4">
        <h2>Map 4</h2>
        <label>State</label>
        <select id="map4bo5-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map4_bo5"></select>
        <label for="team1_map4_score">Team 1 Score:</label>
        <input type="text" id="team1_map4_score" name="team1_map4_score">
        <label for="team2_map4_score">Team 2 Score:</label>
        <input type="text" id="team2_map4_score" name="team2_map4_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
      <form name="map5_bo5_form" method="post" onsubmit="saveData('map5_bo5_form', event)" id="bo5m5">
        <h2>Map 5</h2>
        <label>State</label>
        <select id="map5bo5-state" class="mapstate" name="state">
          <option value="unplayed">Unplayed</option>
          <option value="upnext">Up Next</option>
          <option value="ipr">In Progress</option>
          <option value="done">Done</option>
        </select>
        <label for="maps">Map</label>
        <select class="maps" name="map5_bo5"></select>
        <label for="team1_map5_score">Team 1 Score:</label>
        <input type="text" id="team1_map5_score" name="team1_map5_score">
        <label for="team2_map5_score">Team 2 Score:</label>
        <input type="text" id="team2_map5_score" name="team2_map5_score"><br>
        <input type="submit" value="Submit" id="submit">
      </form>
    </div>
  </div>
</div>

<script>
  const radioButtons = document.querySelectorAll('input[type="radio"][name="formType"]');
  const bo3 = document.getElementById('bo3');
  const bo5 = document.getElementById('bo5');

  // Function to show or hide form sections based on selected radio option
  function toggleForm() {
    if (this.value === 'BO3') {
      bo3.style.display = 'block';
      bo5.style.display = 'none';
      localStorage.setItem('mapset', 'bo3');
    } else {
      bo3.style.display = 'none';
      bo5.style.display = 'block';
      localStorage.setItem('mapset', 'bo5');
    }
  }

  // Add event listener to each radio button
  radioButtons.forEach(radioButton => {
    radioButton.addEventListener('change', toggleForm);
  });

  // Initially show the basic form
  toggleForm.call(radioButtons[0]);
  var coll = document.getElementsByClassName("collapsible");
  var i;

  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }
// Predefined data for hero options
const heroes = [
  "ANA", 
  "ASHE", 
  "BAPTISTE", 
  "BASTION", 
  "BRIGITTE", 
  "CASSIDY", 
  "DVA",
  "DOOMFIST", 
  "ECHO", 
  "GENJI", 
  "HANZO", 
  "ILLARI", 
  "JUNKERQUEEN", 
  "JUNKRAT", 
  "KIRIKO",
  "LIFEWEAVER", 
  "LUCIO", 
  "MAUGA", 
  "MEI", 
  "MERCY", 
  "MOIRA", 
  "ORISA", 
  "PHARAH", 
  "RAMATTRA",
  "REAPER", 
  "REINHARDT", 
  "ROADHOG", 
  "SIGMA", 
  "SOJOURN", 
  "SOLDIER76", 
  "SOMBRA", 
  "SYMMETRA",
  "TORBJORN", 
  "TRACER", 
  "VENTURE", 
  "WIDOWMAKER", 
  "WINSTON", 
  "WRECKINGBALL", 
  "ZARYA", 
  "ZENYATTA"
];

const maps = [
  "Control",
  "Hybrid",
  "Escort",
  "Push",
  "Flashpoint",
  "Busan",
  "Ilios",
  "Lijiang Tower",
  "Nepal",
  "Oasis",
  "Samoa",
  "Antarctic Peninsula",
  "Circuit Royal",
  "Dorado",
  "Havana",
  "Junkertown",
  "Rialto",
  "Route 66",
  "Shambali Monastery",
  "Watchpoint: Gibraltar",
  "Blizzard World",
  "Eichenwalde",
  "Hollywood",
  "Kingâ€™s Row",
  "Midtown",
  "Numbani",
  "Paraiso",
  "Colosseo",
  "Esperanca",
  "New Queen Street",
  "New Junk City",
  "Suravasa",
  "Hanaoka"
];

document.querySelectorAll(".maps").forEach(select => {
  maps.forEach(map => {
    const option = new Option(map, map);
    select.add(option);
  });
});

// Populate select options for all players
document.querySelectorAll(".js-example-basic-single").forEach(select => {
  heroes.forEach(hero => {
    const option = new Option(hero, hero);
    select.add(option);
  });
});

// Initialize Select2 for all select elements with the class 'js-example-basic-single'
$('.js-example-basic-single').select2();
$('.maps').select2();

function resetForm(button) {
  // Traverse DOM to find the parent section of the reset button
  var section = button.closest('.content');

  // Find form elements within the section and reset them
  section.querySelectorAll('input[type="text"]').forEach(input => {
    input.value = ''; // Clear input fields
  });
  section.querySelectorAll('select').forEach(select => {
    select.value = ''; // Reset select boxes
    $(select).trigger('change.select2'); // Trigger change event for Select2
  });
}

function swap(button) {
  for (let i = 1; i <= 5; i++) {
      // Swap hero names
      let t1Hero = localStorage.getItem(`t1roster_player${i}_hero`);
      let t2Hero = localStorage.getItem(`t2roster_player${i + 5}_hero`);
      localStorage.setItem(`t1roster_player${i}_hero`, t2Hero);
      localStorage.setItem(`t2roster_player${i + 5}_hero`, t1Hero);

      // Swap player names
      let t1Name = localStorage.getItem(`t1roster_player${i}_name_ow`);
      let t2Name = localStorage.getItem(`t2roster_player${i + 5}_name_ow`);
      localStorage.setItem(`t1roster_player${i}_name_ow`, t2Name);
      localStorage.setItem(`t2roster_player${i + 5}_name_ow`, t1Name);

      // Swap logos (if necessary)
      let t1Logo = localStorage.getItem('t1_logo');
      let t2Logo = localStorage.getItem('t2_logo');
      localStorage.setItem('t1_logo', t2Logo);
      localStorage.setItem('t2_logo', t1Logo);
    }
      let t1 = localStorage.getItem('t1_name');
      let t2 = localStorage.getItem('t2_name');
      localStorage.setItem('t1_name', t2);
      localStorage.setItem('t2_name', t1);

    // Swap scores (assuming it's a best-of series)
    for (let i = 1; i <= 5; i++) {
      // Swap scores for each map
      let t1MapScore = localStorage.getItem(`bo5m${i}_team1_map${i}_score`);
      let t2MapScore = localStorage.getItem(`bo5m${i}_team2_map${i}_score`);
      localStorage.setItem(`bo5m${i}_team1_map${i}_score`, t2MapScore);
      localStorage.setItem(`bo5m${i}_team2_map${i}_score`, t1MapScore);
    }
    for (let i = 1; i <= 3; i++) {
      // Swap scores for each map
      let t1MapScore = localStorage.getItem(`bo3m${i}_team1_map${i}_score`);
      let t2MapScore = localStorage.getItem(`bo3m${i}_team2_map${i}_score`);
      localStorage.setItem(`bo3m${i}_team1_map${i}_score`, t2MapScore);
      localStorage.setItem(`bo3m${i}_team2_map${i}_score`, t1MapScore);
    }
}


function saveData(formName, event) {
  event.preventDefault(); // Prevent the form from submitting

  // Get the form element
  var form = document.forms[formName];

  // Get the ID of the form
  var formId = form.getAttribute('id');

  // Loop through each select element inside the form
  var selects = form.querySelectorAll('select');
  selects.forEach(function(select) {
    // Get the name of the select element
    var selectName = select.getAttribute('name');
    // Get the selected value of the select element
    var selectedValue = select.value;
    // Save the selected value in local storage with the form ID as the key
    localStorage.setItem(formId + '_' + selectName, selectedValue);

  });

  // Optionally, you can also save the player names if needed
  // For example:
  var playerNames = form.querySelectorAll('input[type="text"]');
  playerNames.forEach(function(input) {
    // Get the name of the input element
    var inputName = input.getAttribute('name');
    // Save the input value in local storage with the form ID as the key
    localStorage.setItem(formId + '_' + inputName, input.value);
  });

  // Optionally, you can redirect to another page or perform any other action
}
</script>

</body>
</html>
